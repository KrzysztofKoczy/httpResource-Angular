import{a as B,b as l,c as G,d as q,f as D,g as z,h as L,i as $,j,k as H,l as W,m as J,n as K,o as Q,q as X}from"./chunk-VP6JGWTT.js";import{a as x}from"./chunk-VIHUTXHR.js";import{D as k,H as m,K as E,L as p,M as u,P as o,Q as t,R as s,T as f,V as n,W as S,X as w,ca as I,ga as N,ka as R,n as g,na as T,oa as U,qa as V,ta as A,w as y,z as i}from"./chunk-NQ56K3WE.js";function Z(d,r){d&1&&(o(0,"div",10),n(1," Product name is required (min. 3 characters) "),t())}function tt(d,r){d&1&&(o(0,"div",10),n(1," Category is required "),t())}function et(d,r){d&1&&(o(0,"div",10),n(1," The price must be in the range from 0 to 10000 "),t())}function ot(d,r){d&1&&(o(0,"div",10),n(1," The stock must be in the range from 0 to 10000 "),t())}function nt(d,r){d&1&&(o(0,"div",10),n(1," Product description is required "),t())}var Y=class d{router=g(V);http=g(R);route=g(U);formBuilder=g(Q);productForm;isEditMode=!1;productId=y("");product=T(()=>this.productId()?`${x}?id=${this.productId()}`:"",{defaultValue:[]});constructor(){this.productForm=this.createForm(),I(()=>{let r=this.productId(),c=this.product.value()[0];c&&this.productForm.patchValue(c)})}ngOnInit(){let r=this.route.snapshot.paramMap.get("id");r&&this.productId.set(r),this.isEditMode=!!this.productId()}submit(){if(this.productForm.valid){let r=this.productForm.getRawValue();r.imageUrl=r.imageUrl||"assets/images/default-product.png",this.isEditMode&&this.productId()?this.http.put(`${x}/${this.productId()}`,r).subscribe({next:c=>{console.log("Product updated successfully:",c),this.router.navigate(["/products",this.productId()])},error:c=>{console.log("ERROR updating product:",c)}}):(delete r.id,this.http.post(x,r).subscribe({next:c=>{this.router.navigate(["/products",c.id])},error:c=>{console.log("Error creating product:",c)}}))}else alert("Wrong data")}goBack(){this.isEditMode?this.router.navigate(["/products",this.productId()]):this.router.navigate(["/products"])}resetForm(){if(this.isEditMode){let r=this.product.value()[0];r&&this.productForm.patchValue(r)}else this.productForm.reset({price:0,stock:0,imageUrl:""})}createForm(){return this.formBuilder.group({name:["",[l.required,l.minLength(3)]],category:["",l.required],price:[0,[l.required,l.min(.01),l.max(1e4)]],stock:[0,[l.required,l.min(0),l.max(1e4)]],imageUrl:[""],description:["",l.required]})}static \u0275fac=function(c){return new(c||d)};static \u0275cmp=k({type:d,selectors:[["app-product-form"]],decls:64,vars:20,consts:[[1,"product-form-container"],[1,"navigation"],[1,"btn","btn-secondary",3,"click"],[1,"header"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group","full-width"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Product name",1,"form-control"],[1,"error-text"],[1,"form-group"],["for","category"],["id","category","formControlName","category",1,"form-control"],["value",""],["value","Electronics"],["value","Accessories"],["value","Gaming"],["value","Audio"],["value","Software"],["value","Books"],["for","price"],["type","number","id","price","formControlName","price","step","0.01","min","0","max","10000","placeholder","0.00",1,"form-control"],["for","stock"],["type","number","id","stock","formControlName","stock","max","10000","min","0","placeholder","0",1,"form-control"],["for","imageUrl"],["type","url","id","imageUrl","formControlName","imageUrl","placeholder","https://example.com/image.jpg",1,"form-control"],[1,"help-text"],["for","description"],["id","description","formControlName","description","placeholder","Product description","rows","5",1,"form-control"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(c,e){if(c&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return e.goBack()}),n(3," \u2190 Back "),t()(),o(4,"div",3)(5,"h1"),n(6),t(),o(7,"p"),n(8),t()(),o(9,"div",4)(10,"form",5),f("ngSubmit",function(){return e.submit()}),o(11,"div",6)(12,"div",7)(13,"label",8),n(14,"Name *"),t(),s(15,"input",9),m(16,Z,2,0,"div",10),t(),o(17,"div",11)(18,"label",12),n(19,"Category *"),t(),o(20,"select",13)(21,"option",14),n(22,"Choose category"),t(),o(23,"option",15),n(24,"Electronics"),t(),o(25,"option",16),n(26,"Accessories"),t(),o(27,"option",17),n(28,"Gaming"),t(),o(29,"option",18),n(30,"Audio"),t(),o(31,"option",19),n(32,"Software"),t(),o(33,"option",20),n(34,"Books"),t()(),m(35,tt,2,0,"div",10),t(),o(36,"div",11)(37,"label",21),n(38,"Price (PLN) *"),t(),s(39,"input",22),m(40,et,2,0,"div",10),t(),o(41,"div",11)(42,"label",23),n(43,"Stock *"),t(),s(44,"input",24),m(45,ot,2,0,"div",10),t(),o(46,"div",11)(47,"label",25),n(48,"Image URL"),t(),s(49,"input",26),o(50,"p",27),n(51,"Optional - leave empty"),t()(),o(52,"div",7)(53,"label",28),n(54,"Product description *"),t(),s(55,"textarea",29),m(56,nt,2,0,"div",10),t()(),o(57,"div",30)(58,"button",31),n(59),t(),o(60,"button",32),f("click",function(){return e.goBack()}),n(61," Cancel "),t(),o(62,"button",33),f("click",function(){return e.resetForm()}),n(63," Reset form "),t()()()()()),c&2){let a,_,C,P,h,b,v,M,O,F;i(6),S(e.isEditMode?"Edit product":"Add new product"),i(2),S(e.isEditMode?"Update product":"Fill the form to add new product"),i(2),E("formGroup",e.productForm),i(5),p("error",((a=e.productForm.get("name"))==null?null:a.invalid)&&((a=e.productForm.get("name"))==null?null:a.touched)),i(),u((_=e.productForm.get("name"))!=null&&_.invalid&&((_=e.productForm.get("name"))!=null&&_.touched)?16:-1),i(4),p("error",((C=e.productForm.get("category"))==null?null:C.invalid)&&((C=e.productForm.get("category"))==null?null:C.touched)),i(15),u((P=e.productForm.get("category"))!=null&&P.invalid&&((P=e.productForm.get("category"))!=null&&P.touched)?35:-1),i(4),p("error",((h=e.productForm.get("price"))==null?null:h.invalid)&&((h=e.productForm.get("price"))==null?null:h.touched)),i(),u((b=e.productForm.get("price"))!=null&&b.invalid&&((b=e.productForm.get("price"))!=null&&b.touched)?40:-1),i(4),p("error",((v=e.productForm.get("stock"))==null?null:v.invalid)&&((v=e.productForm.get("stock"))==null?null:v.touched)),i(),u((M=e.productForm.get("stock"))!=null&&M.invalid&&((M=e.productForm.get("stock"))!=null&&M.touched)?45:-1),i(10),p("error",((O=e.productForm.get("description"))==null?null:O.invalid)&&((O=e.productForm.get("description"))==null?null:O.touched)),i(),u((F=e.productForm.get("description"))!=null&&F.invalid&&((F=e.productForm.get("description"))!=null&&F.touched)?56:-1),i(2),E("disabled",e.productForm.invalid||e.product.isLoading()),i(),w(" ",e.isEditMode?"Update product":"Add product"," ")}},dependencies:[N,X,D,H,W,B,z,j,G,q,K,J,L,$,A],styles:["@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.product-form-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem}.product-form-container[_ngcontent-%COMP%]   .navigation[_ngcontent-%COMP%], .product-form-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:2rem}.product-form-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1f2937;margin:0 0 .5rem}.product-form-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0}.product-form-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{text-align:center;padding:3rem 0}.product-form-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:2rem;height:2rem;border:3px solid #e5e7eb;border-top:3px solid #3b82f6;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}.product-form-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;font-size:1.125rem}.product-form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:1rem;border-radius:8px;margin-bottom:1.5rem;display:flex;justify-content:space-between;align-items:center}.product-form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;color:#dc2626;font-size:1.25rem;cursor:pointer;padding:0}.product-form-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#b91c1c}.product-form-container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 10px 15px -3px #0000001a;padding:2rem}.product-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:2rem}@media (max-width: 768px){.product-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.product-form-container[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.875rem;font-weight:500;color:#374151;margin-bottom:.5rem}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-size:1rem;transition:all .2s ease}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]:disabled{background-color:#f9fafb;color:#6b7280;cursor:not-allowed}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.25rem}.product-form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;margin-top:.25rem;margin-bottom:0}.product-form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;padding-top:1.5rem;border-top:1px solid #e5e7eb;flex-wrap:wrap}@media (max-width: 768px){.product-form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}"],changeDetection:0})};export{Y as ProductFormComponent};
